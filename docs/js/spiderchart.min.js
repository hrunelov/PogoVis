/*! PogoVis v0.0.1 | (c) 2020 Hannes Runel√∂v | MIT License |  */
class SpiderChart{constructor(t,e,a,i,s,h,r){this.id=e,this.width=a,this.height=i,this.max=s,this.labels=r,this.flipped=!1;let d=r.length;t.selectAll("svg").remove();let l=t.append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+a+" "+i),n=(d3.scaleLinear().domain([0,s]).range([0,.4*i]),[]);for(let t=h;t<=s;t+=h)n.push(t);for(let t of n)l.append("path").datum([t,t,t]).attr("class",t<s?"spider-tick":"spider-tick-outer").attr("d",this.makeLine());let p=["middle"];for(let t=1;t<d;++t)t<d/2?p.push("end"):t==d/2?p.push("middle"):p.push("start");for(let t=0;t<d;++t){let e=r[t],h=Math.PI/2+2*Math.PI*t/d,n=this.atoc(h,s),c=this.atoc(h,s+40);l.append("line").classed("spider-axis",!0).attr("x1",.5*a).attr("y1",.5*i).attr("x2",n.x).attr("y2",n.y),l.append("text").classed("spider-label",!0).attr("text-anchor",p[t]).attr("x",c.x).attr("y",c.y).text(e)}l.append("path").datum([0,0,0]).classed("spider-shape",!0).attr("id",e).attr("d",this.makeLine())}atoc(t,e){let a=d3.scaleLinear().domain([0,this.max]).range([0,.4*this.height]),i=Math.cos(t)*a(e),s=Math.sin(t)*a(e)*(this.flipped?-1:1);return{x:.5*this.width+i,y:.5*this.height-s}}makeLine(){let t=this.labels.length;return d3.line().x((e,a)=>this.atoc(Math.PI/2+2*Math.PI*a/t,e).x).y((e,a)=>this.atoc(Math.PI/2+2*Math.PI*a/t,e).y).curve(d3.curveLinearClosed)}update(t){d3.select("#"+this.id).datum(t).transition().duration(TRANSITION_DURATION_MEDIUM).attr("d",this.makeLine())}}