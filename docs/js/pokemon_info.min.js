/*! PogoVis v0.0.1 | (c) 2020 Hannes RunelÃ¶v | MIT License |  */
const PAGE_GENERAL=0,PAGE_MOVES=1,PAGE_STATS=2;var lastPokemon,selectedPokemon,lastForm,selectedForm,selectedPageIndex=0;function setSelectedPokemon(e,t){lastPokemon=selectedPokemon,selectedPokemon=e,updateCaptionPokemon(),setSelectedForm(t||0)}function setSelectedForm(e){lastForm=selectedForm,selectedForm=selectedPokemon.forms[e],updateCaptionForm(),updateFormSelectionBar(),d3.selectAll(".page.hidden").classed("hidden",!1).classed("unhidden",!0),updateGeneralInfo(),updateMoveInfo(),updateStatInfo(!0,!0),d3.selectAll(".page.unhidden").classed("hidden",!0).classed("unhidden",!1)}function updateCaptionPokemon(){d3.select("#pokemon-caption-name").text(selectedPokemon.name),d3.select("#pokemon-caption-category").text(selectedPokemon.category),d3.select("#pokemon-caption-id").text(selectedPokemon.id),selectedPokemon.rarity?d3.select("#pokemon-caption-rarity").classed("legendary","legendary"===selectedPokemon.rarity).classed("mythical","mythical"===selectedPokemon.rarity).text(selectedPokemon.rarity).transition().duration(TRANSITION_DURATION_MEDIUM).style("transform","rotate(-45deg) translate(-14px)"):d3.select("#pokemon-caption-rarity").transition().duration(TRANSITION_DURATION_MEDIUM).style("transform","rotate(-45deg) translate(200px)")}function updateCaptionForm(){d3.select("#pokemon-caption-type1-color").transition().duration(TRANSITION_DURATION_MEDIUM).style("background",mixColors("#000",selectedForm.types[0].color,.75)),d3.select("#pokemon-caption-type2-color").transition().duration(TRANSITION_DURATION_MEDIUM).style("background",mixColors("#000",selectedForm.types[selectedForm.types.length>1?1:0].color,.75)),d3.select("#pokemon-caption-image-background").transition().duration(TRANSITION_DURATION_MEDIUM).style("background",mixColors("#000",selectedForm.types[0].color,.2));let e=POKEMON_IMG_PATH+selectedForm.image+IMG_EXTENSION,t=POKEMON_IMG_PATH+selectedForm.image+"_shiny"+IMG_EXTENSION;e!==d3.select("#pokemon-caption-image").attr("src")&&fadeIn(d3.select("#pokemon-caption-image").interrupt().attr("src",e)),d3.select("#pokemon-caption-image-shiny").attr("src",t)}function updateFormSelectionBar(){if(d3.select("#form-selection-bar").classed("collapsed",1==selectedPokemon.forms.length).selectAll("button").remove(),1==selectedPokemon.forms.length)return;d3.select("#form-selection-bar").selectAll("button").data(selectedPokemon.forms).enter().append("button").attr("type","button").classed("tab form-selection-button",!0).classed("selected",e=>e.key===selectedForm.key).classed("pad-top",!0).classed("pad-left-half",(e,t)=>t>0).classed("pad-right-half",(e,t)=>t<selectedPokemon.forms.length-1).attr("title",e=>selectedPokemon.forms.length<10?"":e.name).style("background",e=>getTypeSplitColor(e.types,.72,.8)).on("click",(function(e,t){e.key!==selectedForm.key&&setSelectedForm(t)})).append("div").classed("no-letter-spacing",e=>selectedPokemon.forms.length>=10).text(e=>selectedPokemon.forms.length<10?e.name:e.name.substr(0,2))}function d3SelectPage(e){return d3.select("#pokemon-info-body").select(".page:nth-child("+(e+1)+")")}var lastPageTouchX,pageWidth=d3SelectPage(1).node().offsetLeft-d3SelectPage(0).node().offsetLeft;d3.selectAll(".pokemon-navbar-tab").on("click",(function(e,t){if(d3.select(this).classed("selected"))return;let o=Math.sign(t-selectedPageIndex),n=Math.abs(t-selectedPageIndex),l=d3.select("#pokemon-info-body");if(l.selectAll(".page").style("overflow-y",(e,o)=>t===o?null:"hidden").classed("content-hidden",(e,o)=>t!==o),n>1)for(let e=selectedPageIndex+o;e!=t;e+=o)d3SelectPage(e).style("min-width",0).style("padding",0);o<0?l.node().scrollTo(pageWidth*(selectedPageIndex-n+1),0):n=1,l.transition().duration(TRANSITION_DURATION_MEDIUM).ease(d3.easeExpOut).interp(pageWidth*selectedPageIndex,pageWidth*(selectedPageIndex+o*n),(function(e){d3.select("#pokemon-info-body").node().scrollTo(e,0)})).on("end",(function(){l.selectAll(".page").style("min-width",null).style("padding",null),l.node().scrollTo(pageWidth*t,0)})),d3.selectAll(".pokemon-navbar-tab").classed("selected",!1),d3.select(this).classed("selected",!0),selectedPageIndex=t}));