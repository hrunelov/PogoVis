/*! PogoVis v0.0.1 | (c) 2020 Hannes RunelÃ¶v | MIT License |  */
const PAGE_GENERAL="form-general-info-page",PAGE_MOVES="form-move-info-page",PAGE_STATS="form-stat-info-page";var statChart,lastPokemon,selectedPokemon,lastForm,selectedForm,selectedPage=PAGE_GENERAL;function setSelectedPage(e){e&&(selectedPage=e,d3.selectAll(".page").classed("hidden",!0)),d3.select("#"+selectedPage).classed("hidden",!1),d3.select("#"+selectedPage).node().scrollTo({top:0,behavior:"smooth"})}function setSelectedPokemon(e,t){lastPokemon=selectedPokemon,selectedPokemon=e,updateCaptionPokemon(),setSelectedForm(t||0)}function setSelectedForm(e){lastForm=selectedForm,selectedForm=selectedPokemon.forms[e],updateCaptionForm(),updateFormSelectionBar(),setSelectedPage(),d3.selectAll(".page.hidden").classed("hidden",!1).classed("unhidden",!0),updateGeneralInfo(),updateMoveInfo(),updateStatInfo(),d3.selectAll(".page.unhidden").classed("hidden",!0).classed("unhidden",!1)}function updateCaptionPokemon(){d3.select("#pokemon-caption-name").text(selectedPokemon.name),d3.select("#pokemon-caption-category").text(selectedPokemon.category),d3.select("#pokemon-caption-id").text(selectedPokemon.id),selectedPokemon.rarity?d3.select("#pokemon-caption-rarity").classed("legendary","legendary"===selectedPokemon.rarity).classed("mythical","mythical"===selectedPokemon.rarity).text(selectedPokemon.rarity).transition().duration(TRANSITION_DURATION_MEDIUM).style("transform","rotate(-45deg) translate(-14px)"):d3.select("#pokemon-caption-rarity").transition().duration(TRANSITION_DURATION_MEDIUM).style("transform","rotate(-45deg) translate(200px)")}function updateCaptionForm(){d3.select("#pokemon-caption-type1-color").transition().duration(TRANSITION_DURATION_MEDIUM).style("background",mixColors("#000",selectedForm.types[0].color,.75)),d3.select("#pokemon-caption-type2-color").transition().duration(TRANSITION_DURATION_MEDIUM).style("background",mixColors("#000",selectedForm.types[selectedForm.types.length>1?1:0].color,.75)),d3.select("#pokemon-caption-image-background").transition().duration(TRANSITION_DURATION_MEDIUM).style("background",mixColors("#000",selectedForm.types[0].color,.2));let e=POKEMON_IMG_PATH+selectedForm.image+IMG_EXTENSION,t=POKEMON_IMG_PATH+selectedForm.image+"_shiny"+IMG_EXTENSION;e!==d3.select("#pokemon-caption-image").attr("src")&&fadeIn(d3.select("#pokemon-caption-image").interrupt().attr("src",e)),d3.select("#pokemon-caption-image-shiny").attr("src",t)}function updateFormSelectionBar(){if(d3.select("#form-selection-bar").classed("collapsed",1==selectedPokemon.forms.length).selectAll("button").remove(),1==selectedPokemon.forms.length)return;d3.select("#form-selection-bar").selectAll("button").data(selectedPokemon.forms).enter().append("button").attr("type","button").attr("disabled",e=>e.key===selectedForm.key||null).classed("tab form-selection-button",!0).classed("selected",e=>e.key===selectedForm.key).classed("pad-top",!0).classed("pad-left-half",(e,t)=>t>0).classed("pad-right-half",(e,t)=>t<selectedPokemon.forms.length-1).attr("title",e=>selectedPokemon.forms.length<10?"":e.name).style("width",1/selectedPokemon.forms.length*100+"%").style("background",e=>getTypeSplitColor(e.types,.72,.8)).on("click",(function(e,t){e.key!==selectedForm.key&&setSelectedForm(t)})).append("div").classed("no-letter-spacing",e=>selectedPokemon.forms.length>=10).text(e=>selectedPokemon.forms.length<10?e.name:e.name.substr(0,2))}d3.selectAll(".pokemon-navbar-tab").on("click",(function(){d3.selectAll(".pokemon-navbar-tab").attr("disabled",null).classed("selected",!1),d3.select(this).attr("disabled",!0).classed("selected",!0),setSelectedPage(d3.select(this).attr("value"))}));