/*! PogoVis v0.0.1 | (c) 2020 Hannes RunelÃ¶v | MIT License |  */
var statChart,lastPokemon,selectedPokemon,lastForm,selectedForm;function setSelectedPokemon(e,t){lastPokemon=selectedPokemon,selectedPokemon=e,updateCaptionPokemon(),setSelectedForm(t||0)}function setSelectedForm(e){lastForm=selectedForm,selectedForm=selectedPokemon.forms[e],d3.select("#form-general-container").node().scrollTo({top:0,behavior:"smooth"}),updateCaptionForm(),updateFormSelectionBar(),updateGeneralInfo()}function updateCaptionPokemon(){d3.select("#pokemon-caption-name").text(selectedPokemon.name),d3.select("#pokemon-caption-category").text(selectedPokemon.category),selectedPokemon.rarity?d3.select("#pokemon-caption-rarity").classed("legendary","legendary"===selectedPokemon.rarity).classed("mythical","mythical"===selectedPokemon.rarity).text(selectedPokemon.rarity).transition().duration(TRANSITION_DURATION_MEDIUM).style("transform","rotate(-45deg) translate(-14px)"):d3.select("#pokemon-caption-rarity").transition().duration(TRANSITION_DURATION_MEDIUM).style("transform","rotate(-45deg) translate(200px)")}function updateCaptionForm(){d3.select("#pokemon-caption").style("background",getTypeSplitColor(selectedForm.types,.8,.75)),d3.select("#pokemon-caption-image-background").style("background",mixColors("#000",selectedForm.types[0].color,.2));let e=POKEMON_IMG_PATH+selectedForm.image+IMG_EXTENSION;e!==d3.select("#pokemon-caption-image").attr("src")&&fadeIn(d3.select("#pokemon-caption-image").interrupt().attr("src",e))}function updateFormSelectionBar(){d3.select("#form-selection-bar").classed("collapsed",1==selectedPokemon.forms.length).classed("expanded",selectedPokemon.forms.length>1).selectAll("div").remove(),1!=selectedPokemon.forms.length&&d3.select("#form-selection-bar").selectAll("div").data(selectedPokemon.forms).enter().append("div").classed("form-selection-button",!0).classed("selected",e=>e.key===selectedForm.key).classed("unselected",e=>e.key!==selectedForm.key).classed("pad-top",!0).classed("pad-left-half",(e,t)=>t>0).classed("pad-right-half",(e,t)=>t<selectedPokemon.forms.length-1).attr("title",e=>selectedPokemon.forms.length<10?"":e.name).style("width",1/selectedPokemon.forms.length*100+"%").style("background",e=>getTypeSplitColor(e.types,.72,e.key===selectedForm.key?.8:.35)).on("mouseover",(function(e){e.key!==selectedForm.key&&d3.select(this).style("background",getTypeSplitColor(e.types,.72,.5))})).on("mouseout",(function(e){e.key!==selectedForm.key&&d3.select(this).style("background",getTypeSplitColor(e.types,.72,.35))})).on("mousedown",(function(e,t){e.key!==selectedForm.key&&setSelectedForm(t)})).append("div").classed("no-letter-spacing",e=>selectedPokemon.forms.length>=10).text(e=>selectedPokemon.forms.length<10?e.name:e.name.substr(0,2))}