/*! PogoVis v0.0.1 | (c) 2020 Hannes Runelöv | MIT License |  */
var heights={},uid=0;function listData({container:t=d3.select("body"),tag:e="div",classed:a=null,data:i=[],key:r=(t=>t),horizontal:n=!1,hideContent:s=!0,fade:o=!0,waitForExit:l=!1,duration:d=TRANSITION_DURATION_MEDIUM,delay:c=0,onexit:p=(()=>{}),onupdate:u=(()=>{}),onenter:h=(()=>{})}={}){let f,y,m,g=a?"."+a:e;y=t.selectAll(g+":not(.exiting)").data(i,r),f=y.exit().classed("exiting",!0),(function(t){let e=[];for(let a of t)for(let t of a.nodes())e.push(t);let a=e.reduce((function(t,e){return t[r(d3.select(e).data()[0])]=[n?e.offsetLeft:e.offsetTop,null],t}),{});for(let e of t)e.order();for(let t of e)a[r(d3.select(t).data()[0])][1]=n?t.offsetLeft:t.offsetTop;for(let t of e){let e=a[r(d3.select(t).data()[0])],i=e[0]-e[1];0!=i&&d3.select(t).interrupt("reorder").style("transform","translate"+(n?"X":"Y")+"("+i+"px)").transition("reorder").duration(d).style("transform","translate"+(n?"X":"Y")+"(0px)")}})([y,f]),m=y.enter().append(e).classed("list-item-wrapper",!0).classed("hide-content",s).classed(a,a);let T=t=>c,I=t=>c+(l&&!f.empty()?d:0),b=n?"width":"height";f.empty()||(p.bind(f.node())(f,T),f.interrupt("tween").transition("tween").duration(d).delay(T).style(b,"0px").style("opacity",o?0:1).remove()),y.empty()||u.bind(y.node())(y,t=>c+(!l||f.empty()||m.empty()?0:d)),m.empty()||(h.bind(m.node())(m,I),m.style(b,"0px").style("opacity",o?0:1).transition("tween").duration(d).delay(I).style(b,null).style("opacity",1))}d3.selection.prototype.at=function(t){return this.filter((e,a)=>a===t)},d3.selection.prototype.svgViewBox=function(){let t;for(t=this.node();t&&"svg"!==t.tagName;t=t.parentNode);return t?t.viewBox.baseVal:null},d3.selection.prototype.delay=function(t){return this.transition("delay").delay(t)},d3.selection.prototype.zoomIn=function({duration:t=TRANSITION_DURATION_MEDIUM,delay:e=0,ease:a=d3.easeQuad,fade:i=!1}={}){let r=this.style("transform","scale(0,0)");return i&&(r=r.style("opacity",0)),r=r.transition().duration(t).delay(e).ease(a).style("transform","scale(1,1)"),i&&(r=r.style("opacity",1)),this},d3.selection.prototype.zoomInY=function({duration:t=TRANSITION_DURATION_MEDIUM,delay:e=0,ease:a=d3.easeQuad,fade:i=!1}={}){let r=this.style("transform","scaleY(0)");return i&&(r=r.style("opacity",0)),r=r.transition().duration(t).delay(e).ease(a).style("transform","scaleY(1)"),i&&(r=r.style("opacity",1)),this},d3.selection.prototype.zoomOut=function({duration:t=TRANSITION_DURATION_MEDIUM,delay:e=0,ease:a=d3.easeQuad,fade:i=!1}={}){let r=this.transition().duration(t).delay(e).ease(a).style("transform","scale(0,0)");return i&&(r=r.style("opacity",0)),this},d3.selection.prototype.zoomOutY=function({duration:t=TRANSITION_DURATION_MEDIUM,delay:e=0,ease:a=d3.easeQuad,fade:i=!1}={}){let r=this.transition().duration(t).delay(e).ease(a).style("transform","scaleY(0)");return i&&(r=r.style("opacity",0)),this};var barProps=d3.local();d3.selection.prototype.appendBar=function({width:t=null,height:e=null,background:a=null,shadow:i=!1,max:r=100,minorTickStep:n=0,minMinorTick:s=0,maxMinorTick:o=100,majorTickStep:l=0,minMajorTick:d=0,maxMajorTick:c=100,minorTickWidth:p=2,minorTickOpacity:u=.33,majorTickWidth:h=2,majorTickOpacity:f=1,labels:y=null,labelAnchor:m="middle",keepLabelsInside:g=!0}={}){t=functionize(t),e=functionize(e),a=functionize(a),n=functionize(n),s=functionize(s),o=functionize(o),l=functionize(l),d=functionize(s),c=functionize(c),y=functionize(y);let T=this.append("div").classed("bar-container",!0).style("width",e=>t(e)?t(e)+"px":null).style("height",t=>e(t)?e(t)+"px":null),I=t=>null!==y(t)?28:0;T.style("height",(function(t){return d3.select(this).node().offsetHeight+I(t)+"px"})),T.each((function(t){barProps.set(this,{max:r,minorTickStep:n(t),minMinorTick:s(t),maxMinorTick:o(t),majorTickStep:l(t),minMajorTick:d(t),maxMajorTick:c(t),minorTickWidth:p,minorTickOpacity:u,majorTickWidth:h,majorTickOpacity:f,labels:y(t),labelAnchor:m,keepLabelsInside:g,barWidth:d3.select(this).node().offsetWidth,barHeight:d3.select(this).node().offsetHeight,labelHeight:I(t)})}));let b=T.append("svg").attr("viewBox",(function(){return"0 0 "+d3.select(this).node().parentNode.offsetWidth+" "+d3.select(this).node().parentNode.offsetHeight})),k=b.append("filter").attr("id","shadow");k.append("feOffset").attr("dx",0).attr("dy",0).attr("in","SourceAlpha").attr("result","offOut"),k.append("feGaussianBlur").attr("in","offOut").attr("stdDeviation",1).attr("result","blurOut"),k.append("feBlend").attr("in","SourceGraphic").attr("in2","blurOut").attr("mode","normal");let x=b.append("g"),M=x.append("rect").classed("bar-background",!0).attr("x",0).attr("y",0).attr("width","100%").style("fill",t=>a(t)?a(t):null);M.attr("height",(function(t){return d3.select(this).svgViewBox().height-I(t)})),i&&M.attr("filter","url(#shadow)");let N=b.append("mask").attr("id",(t,e)=>"ticks"+uid+++e);return x.attr("mask",(t,e)=>"url(#"+N.at(e).attr("id")+")"),N.append("rect").attr("x",0).attr("y",0).attr("width","100%").attr("height","100%").style("fill","#000"),N.append("rect").classed("bar-mask",!0).attr("x",0).attr("y",0).attr("width","100%").style("fill","#fff").attr("height",(function(t){return d3.select(this).svgViewBox().height-I(t)})),T.setBarTickStep({minorTickStep:t=>n(t),majorTickStep:t=>l(t),labels:t=>y(t)}),T},d3.selection.prototype.setBarTickStep=function({minorTickStep:t=null,majorTickStep:e=null,labels:a=null}={}){let i=this.select("svg").select("mask"),r=function(t,e){return t/barProps.get(this).max*e*barProps.get(this).barWidth};if(null!==t&&(t=functionize(t),this.each((function(e){barProps.get(this).minorTickStep=t(e)})),i.selectAll(".minor").remove(),i.selectAll(".minor").data((function(e){return t(e)?new Array(Math.floor(Math.min(barProps.get(this).maxMinorTick,barProps.get(this).max-1e-4)/t(e))).fill(t(e)):[]})).enter().append("line").classed("bar-tick",!0).classed("minor",!0).attr("x1",(function(t,e){return r.bind(this)(t,e+1)})).attr("y1",0).attr("x2",(function(t,e){return r.bind(this)(t,e+1)})).attr("y2","100%").style("stroke-width",(function(){return barProps.get(this).minorTickWidth})).style("opacity",(function(){return barProps.get(this).minorTickOpacity}))),null!==e){e=functionize(e),this.each((function(t){barProps.get(this).majorTickStep=e(t)})),i.selectAll(".major").remove(),i.selectAll(".bar-label").remove();let t=function(t){let e=barProps.get(this).majorTickStep;return e?new Array(Math.floor(Math.min(barProps.get(this).maxMajorTick,barProps.get(this).max-1e-4)/e)).fill(e):[]};i.selectAll(".major").data(t).enter().append("line").classed("bar-tick",!0).classed("major",!0).attr("x1",(function(t,e){return r.bind(this)(t,e+1)})).attr("y1",0).attr("x2",(function(t,e){return r.bind(this)(t,e+1)})).attr("y2","100%").style("stroke-width",(function(){return barProps.get(this).majorTickWidth})).style("opacity",(function(){return barProps.get(this).majorTickOpacity}))}if(null!==a){a=functionize(a),this.each((function(t){barProps.get(this).labels=a(t)}));let t=this.select("svg");t.selectAll(".bar-label").remove();let e=function(t){if(!a(t))return[];let e=barProps.get(this).majorTickStep;return e?new Array(Math.floor(Math.min(barProps.get(this).maxMajorTick,barProps.get(this).max)/e)+1).fill(e):[]};t.selectAll(".bar-label").data(e).enter().append("text").classed("bar-label",!0).classed("numeric-label",!0).attr("text-anchor",(function(){return barProps.get(this).labelAnchor})).text((function(t,e){let a=barProps.get(this).labels;return(a[e]?a[e]:t*e).toString().replace(1/0,"∞")})).attr("x",(function(t,e){let a=r.bind(this)(t,e);if(!barProps.get(this).keepLabelsInside)return a;let i,n,s=d3.select(this).node().getBBox().width;switch(barProps.get(this).labelAnchor){case"start":i=0,n=s;break;case"middle":n=i=.5*s;break;case"end":i=s,n=0}return Math.min(a-Math.min(0,a-i),barProps.get(this).barWidth-n)})).attr("y",(function(){return barProps.get(this).barHeight-barProps.get(this).labelHeight+20}))}return this},d3.selection.prototype.appendBarValue=function({color:t=null,shadow:e=!1,value:a=.5,startValue:i=0,fadeFromZero:r=!1,duration:n=TRANSITION_DURATION_MEDIUM,delay:s=0}={}){let o=this.select("svg").select("g").append("rect").classed("bar-value",!0).attr("x",0).attr("y",0).attr("height","100%");return t&&o.style("fill",t),o.setBarValue({value:r?0:a,startValue:r?0:i,immediate:!0}),r&&o.setBarValue({value:a,startValue:i,immediate:!1,duration:n,delay:s}),e&&o.attr("filter","url(#shadow)"),o},d3.selection.prototype.setBarValue=function({value:t=.5,startValue:e=0,immediate:a=!1,duration:i=TRANSITION_DURATION_MEDIUM,delay:r=0,ease:n=d3.easeQuad}={}){return t=functionize(t),e=functionize(e),a?(this.interrupt("fade"),this.attr("x",(function(t){return e(t)/barProps.get(this).max*100+"%"})).attr("width",(function(a){let i=(t(a)-e(a))/barProps.get(this).max*100;return(i===1/0||isNaN(i)?0:i)+"%"}))):this.transition("fade").duration(i).delay(r).ease(n).attr("x",(function(t){return e(t)/barProps.get(this).max*100+"%"})).attr("width",(function(a){let i=(t(a)-e(a))/barProps.get(this).max*100;return(i===1/0||isNaN(i)?0:i)+"%"})),this};var spiderProps=d3.local();function fadeIn(t,e){e=e||0,t.style("opacity",0).transition().duration(TRANSITION_DURATION_MEDIUM).delay(e).style("opacity",1)}function fadeInIcon(t,e){e=e||0,t.style("transform","scale(0,0)").transition().duration(TRANSITION_DURATION_MEDIUM).delay(e).ease(d3.easeBackOut).style("transform","scale(1,1)")}function fadeOutIcon(t,e){e=e||0,t.interrupt().transition().duration(TRANSITION_DURATION_MEDIUM).delay(e).ease(d3.easeBackIn).style("transform","scale(0,0)")}function fadeInText(t,e){e=e||0,t.style("opacity",0).style("transform","scaleY(0)").transition().duration(TRANSITION_DURATION_MEDIUM).delay(e).style("opacity",1).style("transform","scaleY(1)")}function fadeOutText(t,e){e=e||0,t.interrupt().transition().duration(TRANSITION_DURATION_MEDIUM).delay(e).style("opacity",0).style("transform","scaleY(0)")}function animateHeight(t,e,a){let i=d3.select(t);if(heights[t]){i.style("height","auto");const r=heights[t],n=i.node().offsetHeight;i.style("height",r+"px"),heights[t]=n,a&&n<r?i.interrupt().style("height",n+"px"):i.transition().duration(e||TRANSITION_DURATION_MEDIUM).style("height",n+"px")}else heights[t]=i.node().offsetHeight}d3.selection.prototype.appendSpiderChart=function({width:t=null,height:e=null,max:a=1,tick:i=.25,labels:r=["X","Y","Z"],anchors:n=null,anchorOffsets:s=null}={}){let o=r.length,l=this.append("div").classed("spider-container",!0);spiderProps.set(l,{width:t,height:e,max:a,tick:i,n:o,atoc:function(i,r){let n=d3.scaleLinear().domain([0,a]).range([0,.4*e]),s=Math.cos(i)*n(r),o=Math.sin(i)*n(r)*1;return{x:.5*t+s,y:.5*e-o}},makeLine:function(){let t=r.length;return d3.line().x((e,a)=>d.atoc(Math.PI/2+2*Math.PI*a/t,e).x).y((e,a)=>d.atoc(Math.PI/2+2*Math.PI*a/t,e).y).curve(d3.curveLinearClosed)}});let d=spiderProps.get(l),c=l.append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+t+" "+e),p=(d3.scaleLinear().domain([0,a]).range([0,.4*e]),[]);for(let t=i;t<=a;t+=i)p.push(t);for(let t of p)c.append("path").datum(new Array(o).fill(t)).attr("class",t<a?"spider-tick":"spider-tick-outer").attr("d",d.makeLine());if(!n){n=["middle"];for(let t=1;t<o;++t)t<o/2?n.push("end"):t==o/2?n.push("middle"):n.push("start")}s||(s=new Array(o).fill({x:0,y:0}));for(let i=0;i<o;++i){let l=r[i],p=Math.PI/2+2*Math.PI*i/o,u=d.atoc(p,a),h=d.atoc(p,a+40);c.append("line").classed("spider-axis",!0).attr("x1",.5*t).attr("y1",.5*e).attr("x2",u.x).attr("y2",u.y),c.append("text").classed("spider-label",!0).attr("text-anchor",n[i]).attr("x",h.x+s[i].x).attr("y",h.y+s[i].y).text(l)}return l},d3.selection.prototype.appendSpiderChartData=function({strokeWidth:t=null,strokeColor:e=null,fillColor:a=null,data:i=[],fadeFromZero:r=!1,duration:n=TRANSITION_DURATION_MEDIUM,delay:s=0}={}){let o=spiderProps.get(this),l=this.select("svg").append("path").datum(i).classed("spider-shape",!0).attr("d",o.makeLine());return null!==t&&l.style("stroke-width",t+"px"),null!==e&&l.style("stroke",e),null!==a&&l.style("fill",a),spiderProps.set(l,o),l},d3.selection.prototype.setSpiderChartData=function({data:t=[],immediate:e=!1,duration:a=TRANSITION_DURATION_MEDIUM,delay:i=0}={}){let r=spiderProps.get(this);this.datum(t).transition().duration(i+a).attr("d",r.makeLine())},d3.selection.prototype.appendTypeIcon=function(t){return this.append("img").classed("type-icon",!0).attr("src",e=>"img/types/"+(t?t(e).key:e.key)+".svg")},d3.selection.prototype.appendPokemonImage=function({form:t=selectedForm,width:e=75,selected:a=!1,fadeDelay:i=0,fadeFrame:r=!0,fadeImage:n=!0,onclick:s=function(){}}={}){let o=this.append("div").classed("pokemon-image-wrapper",!0),l=o.append("div").classed("pokemon-image-frame",!0).style("height",e+"px").classed("selected",a),d=(l.style("border-color"),mixColors("#000",t.types[0].color,.2));l.style("width",e+"px").style("height",e+"px").style("transform",r&&i?"scaleY(0)":"").style("background",d);let c=l.append("img").classed("pokemon-image",!0).style("opacity",n&&i?0:1).attr("src",POKEMON_IMG_PATH+t.image+IMG_EXTENSION);n&&i&&c.transition().duration(TRANSITION_DURATION_MEDIUM).delay(i).style("opacity",1);let p=o.append("div").classed("pokemon-image-name",!0).classed("selected",a).text(t.pokemon.name).style("transform",r?"scaleY(0)":"");if(t.ancestor){let e=t.ancestor.evolutions.filter(e=>e.descendant.key===t.key)[0].evolutionType;e&&(e=e.split("_"),p.classed("two-lines",!0).html(capitalize(e[0])+"<br/>"+t.pokemon.name+(e[1]?" "+capitalize(e[1]):"")))}return a||o.append("button").attr("type","button").classed("pokemon-image-hot-area",!0).style("width",e+4+"px").style("height",e+32+"px").on("mouseover",(function(){l.classed("selected",!0),p.classed("selected",!0)})).on("mouseout",(function(){l.classed("selected",!1),p.classed("selected",!1)})).on("click",s),r&&i&&(l.transition().duration(TRANSITION_DURATION_MEDIUM).delay(i).ease(d3.easeBackOut).style("transform","scaleY(1)"),p.transition().duration(TRANSITION_DURATION_MEDIUM).delay(i).style("transform","scaleY(1)")),o};