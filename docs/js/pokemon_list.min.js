/*! PogoVis v0.0.1 | (c) 2020 Hannes Runelöv | MIT License |  */
function showPokemonList(){generatePokemonList(""),d3.select("#pokemon-list-wrapper").classed("shown",!0).classed("hidden",!1),d3.select("#pokemon-list-filter").node().focus()}function hidePokemonList(){d3.select("#pokemon-list-wrapper").classed("shown",!1).classed("hidden",!0),d3.select("#pokemon-list-filter").node().value=""}function generatePokemonList(e){let o=""!==(e=e.trim())?pokedex.pokemon.filter(o=>o.name.toLowerCase().includes(e.toLowerCase())):[];if(o.sort((function(o,t){let s=0;return o.name.toLowerCase().startsWith(e.toLowerCase())&&--s,t.name.toLowerCase().startsWith(e.toLowerCase())&&++s,0!=s?s:o.name<t.name?-1:t.name<o.name?1:0})),0==o.length)d3.select("#pokemon-list").selectAll("li").remove(),d3.select("#pokemon-list").append("li").attr("id","pokemon-list-message").html(""===e?"Type to search for a Pokémon":'No Pokémon found with "<b>'+e+'</b>" in its name');else{d3.select("#pokemon-list-message").remove();let e=d3.select("#pokemon-list").selectAll("li").data(o,e=>e);generatePokemonRows(e),e.exit().remove()}}function generatePokemonRows(e){let o=e.enter().append("li").merge(e).classed("pokemon-list-row",!0).classed("pad-top",(e,o)=>o>0).attr("id",e=>"row-"+e.key).style("background",e=>getTypeSplitColor(e.forms[0].types,.75,.6)).on("mouseover",(function(e){d3.select(this).style("background",e=>getTypeSplitColor(e.forms[0].types,.75,.8)).select(".pokemon-list-image-background").style("background",e=>mixColors("#000",e.forms[0].types[0].color,.25))})).on("mouseout",(function(e){d3.select(this).style("background",e=>getTypeSplitColor(e.forms[0].types,.75,.6)).select(".pokemon-list-image-background").style("background",e=>mixColors("#000",e.forms[0].types[0].color,.125))})).on("mousedown",(function(e){hidePokemonList(),setSelectedPokemon(e)}));o.selectAll("div").remove(),o.append("div").classed("pokemon-list-image-background",!0).style("background",e=>mixColors("#000",e.forms[0].types[0].color,.125)).append("img").classed("pokemon-list-image",!0).attr("src",e=>POKEMON_IMG_PATH+e.forms[0].key+IMG_EXTENSION),o.append("div").classed("pokemon-list-name",!0).text(e=>e.name)}d3.select("#pokemon-list-filter").on("focus",(function(){showPokemonList(),animateHeight("#pokemon-list-wrapper",TRANSITION_DURATION_FAST,!0)})).on("input",(function(){generatePokemonList(d3.select(this).node().value),animateHeight("#pokemon-list-wrapper",TRANSITION_DURATION_FAST,!0)})).on("blur",(function(){setTimeout((function(){hidePokemonList()}),1)}));